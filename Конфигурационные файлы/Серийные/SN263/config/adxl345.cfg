# Настройка датчика ADXL345 для измерения резонансов
[adxl345]
cs_pin: scanner:PA3
spi_bus: spi1
#axes_map: x,y,z                                           # Настройка направления движения осей относительно датчика



[resonance_tester]
accel_chip: adxl345
probe_points:
   250,250,20                                              # Координаты по X, Y и Z, в которых будет производиться измерение
min_freq: 5
max_freq: 133
accel_per_hz: 75
hz_per_sec: 1  


[gcode_macro ADXLcs]
gcode:
      ACCELEROMETER_QUERY
 
[gcode_macro adxl345]
gcode:
      G28                                                  # Все оси находят дом
      G1 X250 Y250 Z20 F7800                               # Идём в точку измерения резонансов
      SET_VELOCITY_LIMIT ACCEL=8000                        # Задаём максимальное ускорение для измерения резонансов
      SET_INPUT_SHAPER SHAPER_FREQ_X=0 SHAPER_FREQ_Y=0     # Выключаем текущие фильтры IS
      SHAPER_CALIBRATE                                     # Измеряем резонансы
	  SAVE_CONFIG                                          # Сохраняем результаты